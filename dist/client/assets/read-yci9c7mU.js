import{w as L,a as C,b as k,c as D,r as f,j as t,d as P,i as $,L as R}from"./chunk-EPOLDU6W-DpLngtnw.js";import{c as E,R as T}from"./routes-ulYaB1pG.js";import{R as v}from"./read-only-textarea-PJVzRLlP.js";import{C as O}from"./copy-DQOZelfD.js";import{d as A,F as I}from"./aes-Bq1sgOT2.js";import{c as V,d as H,e as U,b as Y}from"./box-D-ZoK4k-.js";import{u as q,F as z}from"./use-hydrated-yfJoTdK9.js";import{F as G}from"./ArrowLeftIcon-CbJT88Vo.js";import"./tooltip-BuqUIWM3.js";import"./common-DmbqYWaq.js";import"./index-Caj_bV3x.js";const ne=L(function(){const e=E.c(26),o=k(),r=D(),i=q(),[s,N]=f.useState(null),[B,F]=f.useState(!1);let u;e[0]!==r.hash?(u=r.hash.slice(1),e[0]=r.hash,e[1]=u):u=e[1];const[d]=f.useState(u);let x;e[2]!==r.hash.length?(x=()=>{r.hash.length>0&&history.replaceState({},document.title,T.PRIVATE_NOTES+"#redacted")},e[2]=r.hash.length,e[3]=x):x=e[3];let p;e[4]!==r?(p=[r],e[4]=r,e[5]=p):p=e[5],f.useEffect(x,p);let g,y;e[6]!==d||e[7]!==o.ciphertext?(g=()=>{o.ciphertext&&A(o.ciphertext,d).then(n=>N(n)).catch(n=>{console.error("Error occurred while trying to decrypt the ciphertext.",n),F(!0)})},y=[o.ciphertext,d],e[6]=d,e[7]=o.ciphertext,e[8]=g,e[9]=y):(g=e[8],y=e[9]),f.useLayoutEffect(g,y);const j=o.expiration;if(B||i&&d.length!==10){let n;return e[10]===Symbol.for("react.memo_cache_sentinel")?(n=t.jsx(S,{message:"An error occurred while trying to decrypt the note. Double check that the URL is copied exactly and try again."}),e[10]=n):n=e[10],n}if(o.needsConfirmation){let n;return e[11]===Symbol.for("react.memo_cache_sentinel")?(n=t.jsx(J,{}),e[11]=n):n=e[11],n}const _=s||"";let l;e[12]!==_?(l=t.jsx(V,{title:"",children:t.jsx("div",{children:t.jsx(O,{content:_})})}),e[12]=_,e[13]=l):l=e[13];let c;e[14]!==s?(c=t.jsx(H,{isLast:!1,children:s===null?t.jsx(v,{value:"Decryptingâ€¦"}):t.jsx(v,{value:s})}),e[14]=s,e[15]=c):c=e[15];let w;e[16]===Symbol.for("react.memo_cache_sentinel")?(w=t.jsx(I,{className:"h-5 w-5 mr-1","aria-hidden":"true"}),e[16]=w):w=e[16];let h;e[17]!==j||e[18]!==s?(h=s!==null&&(j===0?t.jsx("span",{children:"This note is now deleted. Copy the content in the note before closing this window."}):t.jsxs("span",{children:["This note will be deleted on"," ",new Date(j*1e3).toLocaleString(),"."]})),e[17]=j,e[18]=s,e[19]=h):h=e[19];let m;e[20]!==h?(m=t.jsxs(U,{children:[w,h]}),e[20]=h,e[21]=m):m=e[21];let b;return e[22]!==m||e[23]!==l||e[24]!==c?(b=t.jsxs(Y,{children:[l,c,m]}),e[22]=m,e[23]=l,e[24]=c,e[25]=b):b=e[25],b});function J(){const a=E.c(2);let e;a[0]===Symbol.for("react.memo_cache_sentinel")?(e=t.jsx("p",{className:"lead",children:"You were sent a sensitive note which is meant to be destroyed after it is read. Once you click on the button below, the note will be deleted."}),a[0]=e):e=a[0];let o;return a[1]===Symbol.for("react.memo_cache_sentinel")?(o=t.jsxs(t.Fragment,{children:[e,t.jsx("div",{className:"not-prose my-6",children:t.jsxs(R,{className:"inline-flex gap-0.5 justify-center items-center text-sm font-medium transition rounded-full py-1 px-3 bg-orange-500/10 text-orange-500 ring-1 ring-inset ring-orange-600/20 hover:bg-orange-600/10 hover:text-orange-600 hover:ring-orange-600",to:"?confirm=true",viewTransition:!0,children:["Show the note",t.jsx(z,{className:"h-4 w-4 -mr-1","aria-hidden":"true"})]})})]}),a[1]=o):o=a[1],o}function S(a){const e=E.c(5),{message:o}=a;let r;e[0]!==o?(r=t.jsx("p",{className:"lead",children:o}),e[0]=o,e[1]=r):r=e[1];let i;e[2]===Symbol.for("react.memo_cache_sentinel")?(i=t.jsx("div",{className:"not-prose flex flex-col items-start gap-3",children:t.jsxs(R,{className:"inline-flex gap-0.5 justify-center items-center text-sm font-medium transition rounded-full py-1 px-3 bg-orange-500/10 text-orange-500 ring-1 ring-inset ring-orange-600/20 hover:bg-orange-600/10 hover:text-orange-600 hover:ring-orange-600",to:T.PRIVATE_NOTES,viewTransition:!0,children:[t.jsx(G,{className:"h-4 w-4 -ml-1","aria-hidden":"true"}),"Back"]})}),e[2]=i):i=e[2];let s;return e[3]!==r?(s=t.jsxs(t.Fragment,{children:[r,i]}),e[3]=r,e[4]=s):s=e[4],s}const ie=C(function(){const e=E.c(2),o=P();if($(o)){let i;return e[0]===Symbol.for("react.memo_cache_sentinel")?(i=t.jsx(S,{message:"The note you are looking was either not found or was deleted."}),e[0]=i):i=e[0],i}let r;return e[1]===Symbol.for("react.memo_cache_sentinel")?(r=t.jsx(S,{message:"Oops! Something bad happened."}),e[1]=r):r=e[1],r});export{ie as ErrorBoundary,ne as default};
