import{c as S}from"./routes-ulYaB1pG.js";import{r as y}from"./chunk-EPOLDU6W-DpLngtnw.js";function E(t){const r=new DOMParser().parseFromString(R(t),"image/svg+xml"),n=r.documentElement;return A(n,t),x(n),new XMLSerializer().serializeToString(r)}function R(t){return t.replace(/<!--.*?-->/g,"")}function U(t){return t.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/{/g,"%7B").replace(/}/g,"%7D").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}function A(t,e){const r=new Set;Array.from(t.attributes).forEach(n=>{n.name.startsWith("xmlns:")&&r.add(n.name.split(":")[1])});for(const n of r)e.match(new RegExp('{namespace}:\\w+=".*?"',"g"))?.length||t.removeAttribute(`xmlns:${n}`)}function x(t){for(let e=t.childNodes.length-1;e>=0;e--){const r=t.childNodes[e];r.nodeType===3&&r.textContent&&r.textContent.trim()===""?t.removeChild(r):r.nodeType===1&&x(r)}for(let e=t.attributes.length-1;e>=0;e--){const r=t.attributes[e];r.specified||t.removeAttributeNode(r)}}const u={jpg:"image/jpeg",png:"image/png",webp:"image/webp",svg:"image/svg+xml"};function P(t){return Object.keys(u).find(e=>u[e]===t)||"jpg"}function W(t,e,r){return new Promise((n,l)=>{const o=new FileReader;o.addEventListener("load",function(s){let i=(s.target?.result||"").toString();e==="svg"&&(i=E(i),i=i.replace(/"/g,"'"),i=U(i),i=`data:image/svg+xml;utf8,${i}`),n(i)}),o.addEventListener("error",function(s){l((s.target?.error||"").toString())});const c=P(t.type);e==="svg"?o.readAsText(t):c!==e||r!="0"&&e!=="png"?C(t,e,parseFloat(r)).then(s=>n(s)).catch(()=>{console.error("Something went wrong, trying plain old read as DataURL."),o.readAsDataURL(t)}):o.readAsDataURL(t)})}function C(t,e,r){return new Promise((n,l)=>{const o=new Image;o.onload=()=>{const c=document.createElement("canvas");c.width=o.width,c.height=o.height;const s=c.getContext("2d");s?s.drawImage(o,0,0):l("Unable to get context"),n(r!==0?c.toDataURL(u[e],r):c.toDataURL(u[e]))},typeof t=="string"?o.src=t:o.src=URL.createObjectURL(t)})}function I(t){const e=S.c(10),{onDrop:r,accept:n}=t,[l,o]=y.useState(!1),c=j;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=a=>{a.preventDefault(),a.stopPropagation(),o(!0)},e[0]=s):s=e[0];const i=s;let p;e[1]===Symbol.for("react.memo_cache_sentinel")?(p=a=>{a.preventDefault(),a.stopPropagation();const g=a.relatedTarget;a.currentTarget.contains(g)||o(!1)},e[1]=p):p=e[1];const b=p;let m;e[2]!==n||e[3]!==r?(m=a=>{a.preventDefault(),a.stopPropagation(),o(!1);const g=Array.from(a.dataTransfer.files);if(n&&g.length>0){const F=n.split(",").map(O),T=g.filter(w=>F.some(D=>{if(D.endsWith("/*")){const L=D.slice(0,-2);return w.type.startsWith(L)}return w.type===D}));r(T)}else r(g)},e[2]=n,e[3]=r,e[4]=m):m=e[4];const h=m;let f;e[5]!==h?(f=a=>{a&&(a.ondragover=c,a.ondragenter=i,a.ondragleave=b,a.ondrop=h)},e[5]=h,e[6]=f):f=e[6];const v=f;let d;return e[7]!==l||e[8]!==v?(d={ref:v,isOver:l},e[7]=l,e[8]=v,e[9]=d):d=e[9],d}function O(t){return t.trim()}function j(t){t.preventDefault(),t.stopPropagation()}export{C as a,W as c,I as u};
