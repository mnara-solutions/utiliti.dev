import{w as R,r as y,u as v,j as t}from"./chunk-EPOLDU6W-DpLngtnw.js";import{c as g,R as N}from"./routes-ulYaB1pG.js";import{B as C}from"./button-B8Y_tqml.js";import{i as S}from"./index-CMzLoK10.js";import{e as T,F as z}from"./aes-Bq1sgOT2.js";import{C as F}from"./copy-DQOZelfD.js";import{B as O,a as P,b as _,c as k,d as I,e as $}from"./box-D-ZoK4k-.js";import{D as A}from"./dropdown-BMPMNnul.js";import"./common-DmbqYWaq.js";import"./index-Caj_bV3x.js";import"./tooltip-BuqUIWM3.js";const E=[{id:"0",label:"after reading it",ttl:720*60*60},{id:"1",label:"1 hour from now",ttl:3600},{id:"24",label:"24 hours from now",ttl:1440*60},{id:"168",label:"7 days from now",ttl:10080*60},{id:"720",label:"30 days from now",ttl:720*60*60}],U=R(function(){const e=g.c(18),x=y.useRef(null),[f,b]=y.useState(null),[s,h]=y.useState("0"),i=v();let o;e[0]!==s||e[1]!==i?(o=async()=>{if(!x.current)return;const w=S({length:10})(),B=await T(x.current.value,w);i.submit({input:B,expiry:s},{method:"post",action:N.PRIVATE_NOTE_CREATE}),b(w)},e[0]=s,e[1]=i,e[2]=o):o=e[2];const c=o;if(i.state==="idle"&&i.data!=null&&f){let p;return e[3]!==s||e[4]!==i.data.id||e[5]!==f?(p=t.jsx(L,{id:i.data.id,secret:f,expiry:s}),e[3]=s,e[4]=i.data.id,e[5]=f,e[6]=p):p=e[6],p}let d;e[7]===Symbol.for("react.memo_cache_sentinel")?(d=t.jsx("div",{className:"bg-zinc-800 rounded-t-lg",children:t.jsx("textarea",{id:"input",name:"input",ref:x,rows:10,className:"block font-mono w-full px-3 py-2 lg:text-sm border-0 bg-zinc-800 focus:ring-0 text-white placeholder-zinc-400",placeholder:"Write your note hereâ€¦",required:!0,maxLength:1048576})}),e[7]=d):d=e[7];let r;e[8]===Symbol.for("react.memo_cache_sentinel")?(r=t.jsx("label",{htmlFor:"expiry",className:"block text-sm font-medium",children:"Note self-destructs"}),e[8]=r):r=e[8];let l;e[9]!==s?(l=t.jsxs(O,{isLast:!1,children:[r,t.jsx(A,{id:"expiry",name:"expiry",className:"ml-2",defaultValue:s,onOptionChange:h,options:E})]}),e[9]=s,e[10]=l):l=e[10];let n;e[11]===Symbol.for("react.memo_cache_sentinel")?(n=t.jsx("div",{}),e[11]=n):n=e[11];const u=i.state==="submitting";let a;e[12]!==c||e[13]!==u?(a=t.jsxs(P,{children:[n,t.jsx("div",{className:"flex gap-x-2",children:t.jsx(C,{type:"button",label:"Create",onClick:c,disabled:u})})]}),e[12]=c,e[13]=u,e[14]=a):a=e[14];let m;return e[15]!==l||e[16]!==a?(m=t.jsxs(_,{children:[d,l,a]}),e[15]=l,e[16]=a,e[17]=m):m=e[17],m});function L(j){const e=g.c(20),{id:x,secret:f,expiry:b}=j;let s;e[0]!==x||e[1]!==f?(s=N.PRIVATE_NOTE(x,f),e[0]=x,e[1]=f,e[2]=s):s=e[2];const h=`${window.location.origin}${s}`,i=h||"";let o;e[3]!==i?(o=t.jsx(k,{title:"Success",children:t.jsx("div",{children:t.jsx(F,{content:i})})}),e[3]=i,e[4]=o):o=e[4];let c;e[5]!==h?(c=t.jsx(I,{isLast:!1,children:t.jsx("input",{type:"text",className:"w-full p-2 text-sm border-0 bg-zinc-800 focus:ring-0 text-white placeholder-zinc-400",readOnly:!0,value:h})}),e[5]=h,e[6]=c):c=e[6];let d;e[7]===Symbol.for("react.memo_cache_sentinel")?(d=t.jsx(z,{className:"h-5 w-5 mr-1","aria-hidden":"true"}),e[7]=d):d=e[7];let r;e[8]!==b?(r=E.find(p=>p.id===b)?.label,e[8]=b,e[9]=r):r=e[9];let l;e[10]!==r?(l=t.jsxs($,{children:[d,"This note will self-destruct"," ",r,"."]}),e[10]=r,e[11]=l):l=e[11];let n;e[12]!==o||e[13]!==c||e[14]!==l?(n=t.jsxs(_,{children:[o,c,l]}),e[12]=o,e[13]=c,e[14]=l,e[15]=n):n=e[15];let u,a;e[16]===Symbol.for("react.memo_cache_sentinel")?(a=t.jsx("h2",{className:"mt-16",children:"What's Next"}),u=t.jsx("p",{children:"You have created a private note that you can easily share with anyone you want with the link above."}),e[16]=u,e[17]=a):(u=e[16],a=e[17]);let m;return e[18]!==n?(m=t.jsxs(t.Fragment,{children:[n,a,u]}),e[18]=n,e[19]=m):m=e[19],m}export{U as default};
